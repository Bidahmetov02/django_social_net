{% extends 'base.html' %}

{% block title %}All Profiles{% endblock %}

{% block content %}

	{% if is_empty %}
		<h1>No profiles found!</h1>
	{% endif %}

	{% for obj in qs %}
		<div class="ui segment">
			<div class="ui grid">
				<div class="row">
					<div class="three wide column">
						<img src="{{obj.avatar.url}}" class="ui small circular image" alt="">
					</div>
					<div class="thirteen wide column">
						<h3>{{obj.user}}</h3>
						<p>{{obj.bio}}</p>
						<button class="ui primary button">See profile</button>

						<form action="" method="POST">
							{% csrf_token %}
							<input type="hidden" name="profile_pk" value="{{obj.pk}}">

							{% if obj.user not in rel_receiver and obj.user not in rel_sender %}
								<button type="submit" class="ui button positive"><i class="plus square icon"></i>Add Friend</button>
							{% endif %}
						</form>

						{% if obj.user in rel_receiver and request.user not in obj.friends.all %}
							<button class="ui disabled button"><i class="user icon"></i>Waiting for approval</button>
						{% endif %}

						<form action="" method="POST">
							{% csrf_token %}
							<input type="hidden" name="profile_pk" value="{{obj.pk}}">

							{% if request.user in obj.friends.all %}
								<button type="submit" class="ui button nagative"><i class="minus square icon"></i>Remove Friend</button>
							{% endif %}
						</form>

					</div>
				</div>
			</div>
		</div>
	{% endfor %}

{% endblock %}

